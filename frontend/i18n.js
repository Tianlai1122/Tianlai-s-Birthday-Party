// å›½é™…åŒ–ç¿»è¯‘æ•°æ®
const translations = {
    zh: {
        // Hero Section
        'hero.title': 'ðŸŽ‚ Tianlaiçš„ç”Ÿæ—¥æ´¾å¯¹',
        'hero.subtitle': 'Wuhuï½žï½žï½žï½žèµ·é£ž',
        'hero.countdown.inProgress': 'ðŸŽ‰ Let\'s party!',
        'hero.countdown.days': 'å¤©',
        'hero.countdown.hours': 'å°æ—¶',
        'hero.countdown.minutes': 'åˆ†é’Ÿ',
        'hero.countdown.seconds': 'ç§’',

        // Info Section
        'info.title': 'ðŸ“ æ´¾å¯¹ä¿¡æ¯',
        'info.time.label': 'æ—¶é—´',
        'info.time.value': '11æœˆ22æ—¥ æ™šä¸Š8:30',
        'info.location': 'åœ°ç‚¹',
        'info.clickToCopy': 'ç‚¹å‡»å¡ç‰‡å¤åˆ¶åœ°å€',
        'info.clickToView': 'ç‚¹å‡»æŸ¥çœ‹å¤§å›¾',
        'info.title': 'æ´¾å¯¹é¡»çŸ¥',
        'info.dress': 'æ²¡æœ‰Dress Codeï¼Œç©¿çš„èˆ’é€‚ç¾Žä¸½å¸…æ°”å°±è¡Œï¼',
        'info.gift': 'ä¸ç”¨å¸¦ç¤¼ç‰©ï¼Œå¦‚æžœä¸€å®šè¦å¸¦ï¼Œå¸¦ç‚¹åƒçš„å–çš„å°±è¡Œï¼',
        'info.contact': 'æœ‰æ€¥äº‹ç»™å¯¿æ˜Ÿæ‰“ç”µè¯ï¼š',
        'info.parking.label': 'åœè½¦',
        'info.parking.value': 'åœè½¦åœ¨å…¥å£å¤„',
        'info.smoking.label': 'å¸çƒŸ',
        'info.smoking.value': 'è¯·å‹¿åœ¨å®¤å†…å¸çƒŸï¼Œå®¤å¤–ç«ç‚‰å¤„å¯ä»¥å¸çƒŸï¼ðŸš¬',
        
        // Schedule Section
        'schedule.title': 'â° æ—¶é—´å®‰æŽ’',
        'schedule.setup': 'å¼€å§‹å¸ƒç½®ï¼ˆæƒ³æå‰æ¥å¸ƒç½®çš„æœ‹å‹å¯ä»¥æ¥ï¼‰',
        'schedule.tiramisu': 'ðŸ° åˆ¶ä½œææ‹‰ç±³è‹ï¼ˆå¯¹åˆ¶ä½œææ‹‰ç±³è‹æ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥æå‰æ¥ï¼‰',
        'schedule.start': 'ðŸŽ‰ æ´¾å¯¹æ­£å¼å¼€å§‹ðŸ˜',
        'schedule.snacks': 'å¼€å§‹æä¾›å¤œå®µ',
        'schedule.cake': 'åƒè›‹ç³•',
        'schedule.after': 'After Party',
        
        // Team Section
        'team.title': 'ðŸ‘¥ å›¢é˜Ÿæˆå‘˜',
        'team.music': 'ðŸŽµ éŸ³ä¹',
        'team.food': 'ðŸœ å¤œå®µ',
        'team.dessert': 'ðŸ° ç‚¹å¿ƒ',
        'team.drinks': 'ðŸ· é…’æ°´',
        'team.support': 'ðŸŽ¯ å…¶ä»–æ”¯æŒ',
        'team.dj': 'DJ',
        'team.chef': 'å¤§åŽ¨',
        'team.master': 'ææ‹‰ç±³è‹å¤§å¸ˆ',
        'team.bartender': 'è°ƒé…’å¸ˆ',
        'team.playlist': 'å½“æ™šçš„éŸ³ä¹ List',
        'team.dinner': 'DINNER',
        'team.after11': 'AFTER 11',
        'team.likeButton': 'ç»™å¥¹ç‚¹èµž',
        'team.comment': 'ç•™è¨€',
        'team.addMember': 'æ·»åŠ æˆå‘˜',
        'team.wantToHelp': 'ä»Šæ™šæˆ‘è¿˜æƒ³å¸®å¿™ï¼',
        'team.addMemberTitle': 'ä»Šæ™šæˆ‘è¿˜æƒ³å¸®å¿™ï¼',
        'team.memberNamePlaceholder': 'æˆå‘˜åå­—',
        'team.memberRolePlaceholder': 'è§’è‰²/èŒè´£',
        'team.addMemberBtn': 'æ·»åŠ ',

        // Noah, Krystal, æŽå“²è±ª
        'team.noah.role': 'å½“æ™šçš„å¤§åŽ¨',
        'team.noah.note': 'æœ‰å°‘é‡ç´ é£Ÿé€‰é¡¹',
        'team.krystal.role': 'ææ‹‰ç±³è‹å¤§å¸ˆ',
        'team.lizhehao.name': '@æŽå“²è±ª',
        'team.lizhehao.role': 'è°ƒé…’å¸ˆ',
        'team.lizhehao.note1': 'é…’æ°´ç®¡å¤Ÿï¼è¦å–é…’çš„å°±åˆ«å¼€è½¦æ¥äº†ï¼',
        'team.lizhehao.note2': 'æä¾›æ°´å’Œè½¯é¥®æ–™',

        // Comment Section
        'comment.titlePrefix': 'ç»™',
        'comment.titleSuffix': 'ç•™è¨€',
        'comment.namePlaceholder': 'ä½ çš„åå­—',
        'comment.textPlaceholder': 'å†™ä¸‹ä½ æƒ³è¯´çš„è¯...',
        'comment.submit': 'å‘é€ç•™è¨€',
        'comment.listTitle': 'æ‰€æœ‰ç•™è¨€',
        'team.likes': 'ä¸ªèµž',
        
        // Navigation Menu
        'nav.title': 'å¯¼èˆªèœå•',
        'nav.home': 'ðŸ  é¦–é¡µ',
        'nav.info': 'ðŸ“ æ´¾å¯¹ä¿¡æ¯',
        'nav.schedule': 'â° æ—¶é—´å®‰æŽ’',
        'nav.team': 'âœ¨ æ´¾å¯¹å›¢é˜Ÿ',
        'nav.foodies': 'ðŸ± å°é¦‹çŒ«åˆ—è¡¨',
        'nav.drinking': 'ðŸº é€ƒé…’æŽ’è¡Œæ¦œ',
        'nav.games': 'ðŸŽ® æ¸¸æˆ',

        // Foodies Section
        'foodies.title': 'ðŸ± å°é¦‹çŒ«åˆ—è¡¨',
        'foodies.subtitle': 'å¦‚æžœè§‰å¾—è‡ªå·±æ˜¯å°é¦‹çŒ«çš„ï¼Œæƒ³åƒå¤œå®µçš„ï¼Œè¯·ç•™ä¸‹è‡ªå·±çš„åå­—ï¼',
        'foodies.placeholder': 'è¾“å…¥ä½ çš„åå­—',
        'foodies.button': 'æˆ‘æ˜¯å°é¦‹çŒ«',
        'foodies.empty': 'è¿˜æ²¡æœ‰å°é¦‹çŒ«æŠ¥å~',
        
        // Drinking Section
        'drinking.title': 'ðŸº é€ƒé…’æŽ’è¡Œæ¦œ',
        'drinking.subtitle': 'ä»Šæ™šä½ è¦å–å‡ æ¯ï¼Ÿ',
        'drinking.rules': 'è§„åˆ™ï¼šæ¯5ä¸ªä¿¯å§æ’‘å¯ä»¥ä»£æ›¿åŠæ¯ | ä¸€æ¯ç­‰äºŽ100å£',
        'drinking.namePlaceholder': 'è¾“å…¥ä½ çš„åå­—',
        'drinking.countPlaceholder': 'æˆ‘è¦é€ƒå‡ æ¯',
        'drinking.button': 'åŠ å…¥æŽ’è¡Œæ¦œ',
        'drinking.empty': 'è¿˜æ²¡æœ‰äººåŠ å…¥æŽ’è¡Œæ¦œ~',
        'drinking.tonight': 'ä»Šæ™šæˆ‘è¦å–',
        'drinking.cups': 'æ¯',
        
        // Games Section
        'games.title': 'ðŸŽ® æ¸¸æˆ',
        'games.hint': 'ç‚¹å‡»æŸ¥çœ‹æ•™ç¨‹',
        'games.texasHoldem': 'å¾·å·žæ‰‘å…‹',
        'games.mahjong': 'éº»å°†',
        'games.landlord': 'æ–—åœ°ä¸»',
        'games.pool': 'æ¡Œçƒ',
        'games.switch': 'Switch',
        'games.xiaojie': 'å°å§ç‰Œ',
        'games.tenHalf': 'åç‚¹åŠ',
        'games.pingpong': 'ä¹’ä¹“çƒ',
        'games.rageCage': 'Rage Cage',
        'games.rideBus': 'Ride the Bus',
        'games.789': '789',
        'games.titanic': 'æ³°å¦å°¼å…‹',
        'games.blowCards': 'å¹æ‰‘å…‹ç‰Œ',
        'games.phoneBomb': 'æ‰‹æœºç‚¸å¼¹',
        'games.pyramid': 'é‡‘å­—å¡”',
        
        // Vibe Poll
        'vibe.title': 'âœ¨ Preference Poll: What\'s your vibe?',
        'vibe.subtitle': 'é€‰æ‹©ä½ ä»Šæ™šæƒ³çŽ©çš„ç±»åž‹ï¼ˆå¯å¤šé€‰ï¼‰',
        'vibe.drinking': 'Drinking Games',
        'vibe.card': 'Card Games',
        'vibe.board': 'Board Games',
        'vibe.video': 'Video Games',
        'vibe.chill': 'Just Chilling',
        'vibe.votes': 'votes',
        'vibe.vote': 'vote',
        'vibe.namePlaceholder': 'è¾“å…¥ä½ çš„åå­—',
        'vibe.button': 'æäº¤æŠ•ç¥¨',
        'vibe.empty': 'è¿˜æ²¡æœ‰äººæŠ•ç¥¨~',
        
        // Admin
        'admin.button': 'ç®¡ç†å‘˜',
        'admin.title': 'åŽå°ç›‘æŽ§',
        'admin.export': 'å¯¼å‡ºæ•°æ®',
        'admin.clear': 'æ¸…ç©ºæ•°æ®',
        
        // Alerts
        'alert.enterName': 'è¯·è¾“å…¥ä½ çš„åå­—ï¼',
        'alert.enterCount': 'è¯·è¾“å…¥æ¯æ•°ï¼',
        'alert.selectVibe': 'è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªé€‰é¡¹ï¼',
        'alert.confirmClear': 'ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼'
    },
    en: {
        // Hero Section
        'hero.title': 'ðŸŽ‚ Tianlai\'s Birthday Party',
        'hero.subtitle': 'Let\'s celebrate this special night together',
        'hero.countdown.inProgress': 'ðŸŽ‰ Let\'s party!',
        'hero.countdown.days': 'Days',
        'hero.countdown.hours': 'Hours',
        'hero.countdown.minutes': 'Minutes',
        'hero.countdown.seconds': 'Seconds',

        // Info Section
        'info.title': 'ðŸ“ Party Info',
        'info.time.label': 'Time',
        'info.time.value': 'November 22, 8:30 PM',
        'info.location': 'Location',
        'info.clickToCopy': 'Click card to copy address',
        'info.clickToView': 'Click to view larger image',
        'info.title': 'Party Info',
        'info.dress': 'No dress code - just be comfortable and look great!',
        'info.gift': 'No need to bring gifts! But if you insist, some food or drinks would be nice!',
        'info.contact': 'For urgent matters, call the birthday star: ',
        'info.parking.label': 'Parking',
        'info.parking.value': 'Park at the entrance',
        'info.smoking.label': 'Smoking',
        'info.smoking.value': 'No indoor smoking. Outdoor fire pit area is OK! ðŸš¬',
        
        // Schedule Section
        'schedule.title': 'â° Schedule',
        'schedule.setup': 'Setup begins (early birds welcome!)',
        'schedule.tiramisu': 'ðŸ° Tiramisu making session (early birds welcome!)',
        'schedule.start': 'ðŸŽ‰ Party officially startsðŸ˜',
        'schedule.snacks': 'Late night snacks served',
        'schedule.cake': 'Cake time',
        'schedule.after': 'After Party',
        
        // Team Section
        'team.title': 'ðŸ‘¥ Team',
        'team.music': 'ðŸŽµ Music',
        'team.food': 'ðŸœ Food',
        'team.dessert': 'ðŸ° Dessert',
        'team.drinks': 'ðŸ· Drinks',
        'team.support': 'ðŸŽ¯ Support',
        'team.dj': 'DJ',
        'team.chef': 'Chef',
        'team.master': 'Tiramisu Master',
        'team.bartender': 'Bartender',
        'team.playlist': 'Tonight\'s Playlist',
        'team.dinner': 'DINNER',
        'team.after11': 'AFTER 11',
        'team.likeButton': 'Like',
        'team.comment': 'Comment',
        'team.addMember': 'Add Member',
        'team.wantToHelp': 'I also want to help tonight!',
        'team.addMemberTitle': 'I also want to help tonight!',
        'team.memberNamePlaceholder': 'Member Name',
        'team.memberRolePlaceholder': 'Role/Responsibility',
        'team.addMemberBtn': 'Add',

        // Noah, Krystal, æŽå“²è±ª
        'team.noah.role': 'Chef of the Night',
        'team.noah.note': 'Some vegetarian options available',
        'team.krystal.role': 'Tiramisu Master',
        'team.lizhehao.name': '@Li Zhehao',
        'team.lizhehao.role': 'Bartender',
        'team.lizhehao.note1': 'Plenty of drinks! Don\'t drive if you\'re drinking!',
        'team.lizhehao.note2': 'Water and soft drinks provided',

        // Comment Section
        'comment.titlePrefix': 'Leave a comment for',
        'comment.titleSuffix': '',
        'comment.namePlaceholder': 'Your name',
        'comment.textPlaceholder': 'Write your message...',
        'comment.submit': 'Post Comment',
        'comment.listTitle': 'All Comments',
        'team.likes': 'likes',
        
        // Navigation Menu
        'nav.title': 'Navigation',
        'nav.home': 'ðŸ  Home',
        'nav.info': 'ðŸ“ Party Info',
        'nav.schedule': 'â° Schedule',
        'nav.team': 'âœ¨ Team',
        'nav.foodies': 'ðŸ± Foodie List',
        'nav.drinking': 'ðŸº Drinking',
        'nav.games': 'ðŸŽ® Games',

        // Foodies Section
        'foodies.title': 'ðŸ± Foodie List',
        'foodies.subtitle': 'If you think you\'re a foodie and want late night snacks, please leave your name!',
        'foodies.placeholder': 'Enter your name',
        'foodies.button': 'I\'m a Foodie',
        'foodies.empty': 'No foodies yet~',
        
        // Drinking Section
        'drinking.title': 'ðŸº Drinking Leaderboard',
        'drinking.subtitle': 'How many drinks tonight?',
        'drinking.rules': 'Rules: 5 push-ups = half drink | 1 drink = 100 sips',
        'drinking.namePlaceholder': 'Enter your name',
        'drinking.countPlaceholder': 'Number of drinks',
        'drinking.button': 'Join Leaderboard',
        'drinking.empty': 'No one on the leaderboard yet~',
        'drinking.tonight': 'Tonight I\'ll drink',
        'drinking.cups': 'drinks',
        
        // Games Section
        'games.title': 'ðŸŽ® Games',
        'games.hint': 'Click for tutorial',
        'games.texasHoldem': 'Texas Hold\'em',
        'games.mahjong': 'Mahjong',
        'games.landlord': 'Fight the Landlord',
        'games.pool': 'Pool',
        'games.switch': 'Switch',
        'games.xiaojie': 'Old Maid (Chinese)',
        'games.tenHalf': 'Ten and a Half',
        'games.pingpong': 'Beer Pong',
        'games.rageCage': 'Rage Cage',
        'games.rideBus': 'Ride the Bus',
        'games.789': '789',
        'games.titanic': 'Titanic',
        'games.blowCards': 'Blow the Cards',
        'games.phoneBomb': 'Phone Bomb',
        'games.pyramid': 'Pyramid',
        
        // Vibe Poll
        'vibe.title': 'âœ¨ Preference Poll: What\'s your vibe?',
        'vibe.subtitle': 'Choose what you want to play tonight (multiple choices allowed)',
        'vibe.drinking': 'Drinking Games',
        'vibe.card': 'Card Games',
        'vibe.board': 'Board Games',
        'vibe.video': 'Video Games',
        'vibe.chill': 'Just Chilling',
        'vibe.votes': 'votes',
        'vibe.vote': 'vote',
        'vibe.namePlaceholder': 'Enter your name',
        'vibe.button': 'Submit Vote',
        'vibe.empty': 'No votes yet~',
        
        // Admin
        'admin.button': 'Admin',
        'admin.title': 'Admin Panel',
        'admin.export': 'Export Data',
        'admin.clear': 'Clear Data',
        
        // Alerts
        'alert.enterName': 'Please enter your name!',
        'alert.enterCount': 'Please enter the number of drinks!',
        'alert.selectVibe': 'Please select at least one option!',
        'alert.confirmClear': 'Are you sure you want to clear all data? This cannot be undone!'
    }
};

// å½“å‰è¯­è¨€
let currentLang = localStorage.getItem('language') || 'zh';

// åˆ‡æ¢è¯­è¨€
function toggleLanguage() {
    currentLang = currentLang === 'zh' ? 'en' : 'zh';
    localStorage.setItem('language', currentLang);
    applyLanguage();
    updateLanguageButton();

    // é‡æ–°æ¸²æŸ“åŠ¨æ€å†…å®¹
    if (typeof renderAll === 'function') {
        renderAll();
    }

    // é‡æ–°æ¸²æŸ“æ—¶é—´å®‰æŽ’
    if (typeof renderTimeline === 'function') {
        renderTimeline();
    }

    // é‡æ–°æ¸²æŸ“å›¢é˜Ÿæˆå‘˜ï¼ˆæ”¯æŒåŒè¯­ï¼‰
    if (typeof renderAllTeamMembers === 'function') {
        renderAllTeamMembers();
    }
}

// åº”ç”¨è¯­è¨€
function applyLanguage() {
    const elements = document.querySelectorAll('[data-i18n]');
    elements.forEach(el => {
        const key = el.getAttribute('data-i18n');
        const translation = translations[currentLang][key];
        if (translation) {
            if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                el.placeholder = translation;
            } else {
                el.textContent = translation;
                // æ›´æ–° glitch æ•ˆæžœçš„ data-text å±žæ€§
                if (el.classList.contains('glitch')) {
                    el.setAttribute('data-text', translation);
                }
            }
        }
    });

    // å¤„ç† placeholder ç¿»è¯‘
    const placeholderElements = document.querySelectorAll('[data-i18n-placeholder]');
    placeholderElements.forEach(el => {
        const key = el.getAttribute('data-i18n-placeholder');
        const translation = translations[currentLang][key];
        if (translation) {
            el.placeholder = translation;
        }
    });

    // æ›´æ–° HTML lang å±žæ€§
    document.documentElement.lang = currentLang === 'zh' ? 'zh-CN' : 'en';
}

// æ›´æ–°è¯­è¨€æŒ‰é’®
function updateLanguageButton() {
    const icon = document.getElementById('lang-icon');
    const text = document.getElementById('lang-text');

    // å½“å‰æ˜¯ä¸­æ–‡ï¼Œæ˜¾ç¤ºç¾Žå›½å›½æ——ï¼ˆè¡¨ç¤ºå¯ä»¥åˆ‡æ¢åˆ°è‹±æ–‡ï¼‰
    if (currentLang === 'zh') {
        icon.textContent = 'ðŸ‡ºðŸ‡¸';
        text.textContent = 'EN';
    } else {
        // å½“å‰æ˜¯è‹±æ–‡ï¼Œæ˜¾ç¤ºä¸­å›½å›½æ——ï¼ˆè¡¨ç¤ºå¯ä»¥åˆ‡æ¢åˆ°ä¸­æ–‡ï¼‰
        icon.textContent = 'ðŸ‡¨ðŸ‡³';
        text.textContent = 'ä¸­æ–‡';
    }
}

// èŽ·å–ç¿»è¯‘æ–‡æœ¬
function t(key) {
    return translations[currentLang][key] || key;
}

// é¡µé¢åŠ è½½æ—¶åº”ç”¨è¯­è¨€
document.addEventListener('DOMContentLoaded', () => {
    applyLanguage();
    updateLanguageButton();
});
